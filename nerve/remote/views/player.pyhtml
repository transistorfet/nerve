<!DOCTYPE html PUBLIC "-//W3C/DTD HTML 4.01//EN">
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />

    <link rel="stylesheet" type="text/css" href="/assets/css/normalize.css" />
    <link rel="stylesheet" type="text/css" href="/assets/css/theme.css" />
    <link rel="stylesheet" type="text/css" href="/assets/css/widgets.css" />
    <link rel="stylesheet" type="text/css" href="/remote/assets/css/remote.css" />

    <script type="text/javascript" src="/assets/js/jquery.min.js"></script>
    <script type="text/javascript" src="/assets/js/widgets.js"></script>
</head>
<body>

<a href="/remote/index">Remote</a> | <a href="/remote/player">Player</a> | <a href="/medialib/">Playlists</a> | <a href="/medialib/search">Search Medialib</a> | <a href="/medialib/search_youtube">Search YouTube</a>
<hr>

<div class="files"><%= len(playlist) %> files in playlist.</div>
<a href="#current">skip to current</a>

<div class="nerve-medialist">

    <% if playlist: %>
    <% #echo('<pre>' + json.dumps(playlist, sort_keys=True, indent=4, separators=(',', ':')) + '</pre>') %>
    <table>
    <thead><tr>
	<th></th>
	<th>Name</th>
    </tr></thead>
    <tbody>
	<% for num,media in enumerate(playlist, 1): %>
	    <tr <%= ' class="current"' if 'current' in media else '' %>>
            <td><%= '<a id="current"></a>' if 'current' in media else '' %><%= num %></td>
            <td><a href="#" class="play_seek" data-id="<%= media['id'] %>">
                <span>
                <% if media['uri'].startswith('file'): %>
                    <% (_, _, filename) = media['uri'].rpartition('/') %>
                    <% (songname, _, _) = filename.rpartition('.') %>
                    <%= urldecode(songname) %>
                <% else: %>
                    <%= media['name'] %>
                <% end %>
                </span>
            </a></td>
            </tr>
	<% end %>
    </tbody>
    </table>
    <% end %>

</div>

<script type="text/javascript">

    $(document).ready(function()
    {
	$('.play_seek').click(function (e) {
	    e.preventDefault();
	    var id = $(this).attr('data-id');
	    $.post('/remote/player', {'play':id}, function(response) {
	    }, 'json');
	});
    });

</script>

</body>
</html> 
 
